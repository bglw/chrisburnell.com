<!-- Load in the main styles -->
<script type="text/javascript">loadCSS('/css/main.min.css?version={{ site.time | date: '%F_%H%M' }}');</script>

<!-- ServiceWorker -->
<script type="text/javascript">
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/serviceworker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }).catch(function(err) {
            console.log('ServiceWorker registration failed: ', err);
        });
        window.addEventListener('load', function() {
            navigator.serviceWorker.controller.postMessage({ 'command': 'trimCaches' });
        });
    }
</script>

<!-- Analytics -->
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-10353655-1" async></script>

<!-- Main Scripts -->
<script type="text/javascript" src="/js/main.min.js?version={{ site.time | date: '%F_%H%M'}}" defer></script>

{% if page.caniuse %}
    <!-- Can I Use Embeds -->
    <script type="text/javascript" src="//cdn.jsdelivr.net/caniuse-embed/1.0.1/caniuse-embed.min.js" defer></script>
{% endif %}

{% if page.codepen == true or page.codepen_slug %}
    <!-- CodePen Embeds -->
    <script type="text/javascript" src="//codepen.io/assets/embed/ei.js" defer></script>
{% endif %}

{% if page.speakerdeck == true or page.speakerdeck_slug %}
    <!-- Speaker Deck Embeds -->
    <script type="text/javascript" src="//speakerdeck.com/assets/embed.js" defer></script>
{% endif %}

{% if page.twitter == true %}
    <!-- Twitter Cards -->
    <script type="text/javascript" src="//platform.twitter.com/widgets.js" defer></script>
{% endif %}
