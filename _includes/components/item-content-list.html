{%- comment -%}

  Consolidate markup for Content List Items.

{%- endcomment -%}
<li role="listitem">
    <article class="h-entry" role="article">
        <a class="u-url" href="{{ page.url }}">
            {% if page.categories contains 'article' %}
                {% include_cached content/svg.html type='article' %}
            {% elsif page.categories contains 'bookmark' %}
                {% include_cached content/svg.html type='link' %}
            {% elsif page.categories contains 'note' %}
                {% include_cached content/svg.html type='feather' %}
            {% elsif page.categories contains 'pen' %}
                {% include_cached content/svg.html type='codepen' %}
            {% elsif page.categories contains 'recipe' %}
                {% include_cached content/svg.html type='article' %}
            {% elsif page.collection == 'beer' or page.collection == 'books' or page.collection == 'music' %}
                {% include_cached content/svg.html type='bullhorn' %}
            {% elsif page.categories contains 'talk' %}
                {% include_cached content/svg.html type='bullhorn' %}
            {% endif %}
            <h3 class="delta  title  p-name"{% if page.categories contains 'note' %} hidden tabindex="-1"{% endif %}>
                {% if page.categories contains 'note' %}
                    {{ page.date | date: '%A, %d %B %Y' }}
                {% else %}
                    {{ page.title | strip_html }}
                {% endif %}
            </h3>
            <p class="lede  p-summary">
                {% if page.lede %}
                    {% if page.categories contains 'bookmark' %}<span class="emoji">üîó</span> {% endif %}{{ page.lede | strip_html | truncatewords: 20 }}
                {% elsif page.categories contains 'article' %}
                    Shared Article
                {% elsif page.categories contains 'bookmark' %}
                    <span class="emoji">üîó</span> Bookmark
                {% elsif page.categories contains 'note' %}
                    {% if page.in_reply_to.first %}
                        <span class="emoji">‚Ü©Ô∏è</span> In reply to:
                        {% if page.in_reply_to.first contains 'mastodon.social' %}
                            <span class="h-cite  u-in-reply-to">a Toot</span>
                        {% elsif page.in_reply_to.first contains 'twitter.com' %}
                            {% if page.in_reply_to.first contains '/status/' %}
                                <span class="h-cite  p-in-reply-to">@{{ page.in_reply_to.first | split: '/status/' | first | split: 'twitter.com/' | last }}</span>
                            {% else %}
                                <span class="h-cite  p-in-reply-to">a Tweet</span>
                            {% endif %}
                        {% elsif page.in_reply_to.first contains 'hwclondon.co.uk' %}
                            <span class="h-cite  p-in-reply-to">Homebrew Website Club London</span>
                        {% else %}
                            <span class="h-cite  p-in-reply-to">{{ page.in_reply_to.first }}</span>
                        {% endif %}
                        <br>
                    {% endif %}
                    {%- assign content = page.content | markdownify | strip_html | replace: '&lt;figcaption&gt;', '' | replace: '&lt;/figcaption&gt;', '' | replace: '&lt;p&gt;', '' | replace: '&lt;/p&gt;', '' | truncatewords: 20 | strip -%}
                    {%- if page.rsvp -%}
                        {%- assign content = content | prepend: '<span class="emoji">üìÖ</span> ' -%}
                    {%- endif -%}
                    {%- if content contains '<img' -%}
                        {%- assign content = content | prepend: '<span class="emoji">üñºÔ∏è</span> ' -%}
                    {%- endif -%}
                    {{ content }}
                {% elsif page.categories contains 'pen' %}
                    <span class="emoji">‚úíÔ∏è</span> Featured Pen
                {% elsif page.categories contains 'recipe' %}
                    Recipe
                {% elsif page.categories contains 'talk' %}
                    Talk{% if page.location %} ‚Äì Given at {{ page.location }}{% endif %}
                {% elsif page.collection == 'beer' or page.collection == 'music' %}
                    {% if page.authors %}
                        {% if page.collection == 'beer' %}
                            <small><span class="emoji">üç∫</span> Beer by</small>
                        {% elsif page.collection == 'music' %}
                            <small><span class="emoji">üé∂</span> Album by</small>
                        {% endif %}
                        {% assign authors = page.authors | uniq %}
                        {%- for author in authors -%}
                            {% unless forloop.first %}, {% endunless %}
                            {{ author | strip }}
                        {%- endfor -%}
                        {%- if page.badges -%}
                            <data value="{{ page.badges.size }}"> (earned {{ page.badges.size }} badge{% if page.badges.size > 1 %}s{% endif %})</data>
                        {%- endif -%}
                    {% endif %}
                    {% if page.rating %}
                        {%- assign rating_base = page.rating | default: 0 | at_least: 0 | at_most: 5 | floor -%}
                        {%- assign rating_fraction = page.rating | minus: rating_base -%}
                        <data class="p-rating  rating  delta" value="{{ page.rating }}">{% for count in (1..rating_base) %}‚òÖ{% endfor %}{% if rating_fraction == 0.25 %}¬º{% elsif rating_fraction == 0.5 %}¬Ω{% elsif rating_fraction == 0.75 %}¬æ{% endif %}</data>
                        <data class="p-worst" hidden>1</data>
                        <data class="p-best" hidden>5</data>
                    {% endif %}
                {% endif %}
            </p>
            <time class="date  dt-published" datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date_to_long_string }}</time>
        </a>
        <a class="u-author" href="/" hidden tabindex="-1"></a>
    </article>
</li>
