{%- assign on_this_day_posts = site.emptyArray -%}
{%- assign posts = include.posts | default: site.posts | where: 'on_this_day', true -%}
{%- assign todays_date = include.reference.date | default: site.time -%}
{%- assign day = todays_date | date: '%d' -%}
{%- assign month = todays_date | date: '%m' -%}
{%- assign year = todays_date | date: '%Y' -%}
{%- for page in posts -%}
    {%- assign check_day = page.date | date: '%d' -%}
    {%- assign check_month = page.date | date: '%m' -%}
    {%- assign check_year = page.date | date: '%Y' -%}
    {%- if check_day == day and check_month == month and check_year != year -%}
        {%- assign on_this_day_posts = on_this_day_posts | push: page -%}
    {%- endif -%}
{%- endfor -%}

{% if on_this_day_posts.size > 0 %}
    <h2 id="on-this-day" class="gamma">On This Day</h2>
    <section class="on-this-day">
        <ol class="deck" role="list">
            {% for page in on_this_day_posts %}
                {% include components/item_deck.liquid relative_year=true strip_h=true %}
            {% endfor %}
        </ol>
    </section>
{% endif %}
