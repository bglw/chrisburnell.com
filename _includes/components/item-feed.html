{%- comment -%}

  Consolidate markup for Feed Items.

{%- endcomment -%}
<item>
    {% if page.categories contains 'note' %}
        <title>{{ page.date | date: '%A, %d %B %Y' }}</title>
    {% else %}
        <title>{{ page.title | xml_escape }}</title>
    {% endif %}
    <link>{{ page.url | absolute_url }}</link>
    <guid isPermaLink="true">{{ page.url | absolute_url }}</guid>
    <pubDate>{{ page.date | date_to_rfc822 }}</pubDate>
    {% if page.lede %}
        <description>{{ page.lede | strip_html | xml_escape | truncatewords: 20 }}</description>
    {% elsif page.categories contains 'article' %}
        <description>Shared Article</description>
    {% elsif page.categories contains 'bookmark' %}
        <description>Bookmark</description>
    {% elsif page.categories contains 'note' %}
        <description>{{ page.content | markdownify | strip_html | xml_escape | truncatewords: 20 }}</description>
    {% elsif page.categories contains 'pen' %}
        <description>Featured Pen</description>
    {% elsif page.categories contains 'recipe' %}
        <description>Recipe</description>
    {% elsif page.categories contains 'review' %}
        <description>Review</description>
    {% elsif page.categories contains 'talk' %}
        <description>Talk{% if page.location %} â€“ Given at {{ page.location | xml_escape }}{% endif %}</description>
    {% endif %}
    {% for category in page.categories %}
        <category>{{ category | xml_escape }}</category>
    {% endfor %}
    {% for tag in page.tags %}
        <category>{{ tag | xml_escape }}</category>
    {% endfor %}
</item>
