{%- comment -%}

  Consolidate markup for Feed Items.

{%- endcomment -%}
<entry>
    {% if page.categories contains 'note' %}
        <title>{{ page.date | date: '%A, %d %B %Y' }}</title>
    {% else %}
        <title>{{ page.title | xml_escape }}</title>
    {% endif %}
    <id>{{ page.url | absolute_url }}</id>
    <published>{{ page.date | date_to_rfc822 }}</published>
    <updated>{{ page.edit_date | default: page.date | date_to_rfc822 }}</updated>
    {% if page.lede %}
        <summary>{{ page.lede | strip_html | xml_escape }}</summary>
    {% elsif page.categories contains 'article' %}
        <summary>Shared Article</summary>
    {% elsif page.categories contains 'bookmark' %}
        <summary>Bookmark</summary>
    {% elsif page.categories contains 'note' %}
        <summary>{{ page.content | markdownify | strip_html | xml_escape }}</summary>
    {% elsif page.categories contains 'pen' %}
        <summary>Featured Pen</summary>
    {% elsif page.categories contains 'recipe' %}
        <summary>Recipe</summary>
    {% elsif page.categories contains 'review' %}
        <summary>Review</summary>
    {% elsif page.categories contains 'talk' %}
        <summary>Talk{% if page.location %} â€“ Given at {{ page.location | xml_escape }}{% endif %}</summary>
    {% elsif page.collection == 'beer' %}
        <summary>Beer Review</summary>
    {% elsif page.collection == 'music' %}
        <summary>Music Review</summary>
    {% endif %}
    {% for category in page.categories %}
        <category term="{{ category | xml_escape }}" />
    {% endfor %}
    {% if page.collection and page.collection != "posts" %}
        <category term="{{ page.collection | downcase }}" />
    {% endif %}
</entry>
