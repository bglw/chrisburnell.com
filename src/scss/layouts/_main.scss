////
/// Main
/// @group layout
////

.main {
	@include owl;
	@include v(padding-block-end, gigantic);
}

.content {
	display: grid;
	align-items: flex-start;
	grid-template-columns: 1fr;

	@include media("above:medium") {
		grid-template-columns:
			[marginalia-start]
			14em
			[marginalia-end]
			var(--measure-gutter)
			[content-start outdent-start]
			repeat(6, 1fr)
			[content-end outdent-end];
		grid-template-rows: auto auto auto 1fr;
	}

	@include media("above:large") {
		grid-template-columns:
			[marginalia-start]
			16em
			[marginalia-end]
			var(--measure-gap)
			[content-start]
			repeat(6, 1fr)
			[content-end]
			var(--measure-gap)
			[outdent-start]
			10em
			[outdent-end];
	}

	&.full {
		@include media("above:medium") {
			grid-template-columns:
				[content-start outdent-start marginalia-start]
				repeat(6, 1fr)
				[content-end outdent-end marginalia-end];
		}
	}

	&.wide {
		@include media("above:medium") {
			grid-template-columns:
				1fr
				[content-start outdent-start marginalia-start]
				repeat(6, 1fr)
				[content-end outdent-end marginalia-end]
				1fr;
		}
	}

	@include media("print") {
		display: block;
	}

	& > %collection-content {
		@include v(max-inline-size, line-length-clamp);
	}
}

.title {
	@include v(margin-block-start, gigantic);
	@include v(margin-block-end, gigantic);

	@include media("above:medium") {
		grid-column: content;
		grid-row: 1 / 2;
	}
}

.details {
	@include owl;
	@include v(margin-block-end, large);
	@include font-family(serif);
	font-style: italic;

	@include media("above:medium") {
		grid-column: marginalia;
		grid-row: 2 / 3;
		margin-block-end: 0;
		text-align: end;
	}

	.full &,
	.wide & {
		text-align: start;
	}

	.title[hidden] ~ &,
	.title.hidden ~ & {
		@include v(margin-block-start, gigantic);
	}

	p {
		@include v(max-inline-size, line-length-clamp);
	}

	a {
		color: inherit;
	}

	time {
		white-space: nowrap;
	}
}
.details--published {
	@include media("below:medium") {
		order: -1;
		@include v(margin-block-start, large);
		margin-block-end: 0;
		@include v(font-size, small);
	}

	.title[hidden] ~ &,
	.title.hidden ~ & {
		@include media("below:medium") {
			@include v(margin-block-end, large);
		}
	}
}

.table-of-contents {
	@include v(margin-block, large);
	overflow-block: auto;

	@include media("below:medium") {
		max-block-size: 60vh;
	}

	@include media("above:medium") {
		grid-column: marginalia;
		grid-row: 3 / 5;
		margin-block-end: 0;
		max-block-size: calc(100vh - #{v(measure, medium)} * 2);
		position: sticky;
		@include v(top, medium);
	}
}

.content__body {
	@include owl;
	overflow: hidden;

	@include media("above:medium") {
		grid-column: content;
		grid-row: 2 / 5;
	}

	.full > &,
	.wide > & {
		@include media("above:medium") {
			grid-row: 3 / 4;
		}
	}

	&.full,
	&.wide {
		@include media("above:medium") {
			grid-column: content-start/outdent-end;
		}
	}

	.title[hidden] ~ &,
	.title.hidden ~ & {
		@include media("above:medium") {
			@include v(margin-block-start, gigantic);
		}
	}
}
.e-content {
	@include owl;
}
.content__body,
.e-content {
	& > * + h2 {
		@include v(margin-block-start, gigantic);
	}
}

.meta {
	@include media("above:medium") {
		grid-column: marginalia;
		grid-row: 4 / 5;
	}
}

.ads {
	@include media("above:medium") {
		grid-column: content;
		grid-row: 5 / 6;
	}
}
