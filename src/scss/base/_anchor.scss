////
/// Anchor
/// @group base
/// @link https://chrisburnell.com/styleguide/#inline-elements
////

a {
    @include transition(background-color, color, text-decoration-color);
    @include will-change(background-color, color, text-decoration-color);
    @include v(background-color, transparent);
    @include v(color, bowhead);
    outline: 0 $border-style-default $color-canada;
    outline: 0 var(--border-style-default) var(--color-canada);
    position: relative;
    text-decoration: underline;
    @include v(text-decoration-color, alto);
    text-decoration-skip-ink: auto;

    &:hover,
    &:focus,
    &:active {
        text-decoration: underline;
        @include v(text-decoration-color, canada);
    }

    &:focus-visible {
        @include v(outline-color, raven);
        outline-width: $border-width-thin;
        outline-width: var(--border-width-thin);
        outline-offset: $border-width-thin;
        outline-offset: var(--border-width-thin);
    }

    &:active {
        @include v(background-color, canada);
        @include v(color, white);
        outline-width: $border-width-thin;
        outline-width: var(--border-width-thin);
        outline-offset: 0;
    }

    %heading-elements & {
        @include v(color, kaiser);
        @include v(text-decoration-color, transparent);
        // coming soon!
        // @include v(text-decoration-width, thin);
    }

    .dark-background & {
        @include v(color, white);
        @include v(text-decoration-color, dove);

        &:hover,
        &:focus,
        &:active {
            @include v(text-decoration-color, canada);
        }
    }

    // hide extra content, text targetted only to screen readers
    :not(.cf-wrapper) > & span:not([class]) {
        @include hidden;
    }
}

// Fancy gradient anchor text
.colourful-anchor {
    &:hover,
    &:focus,
    &:active {
        background-image: linear-gradient(to bottom right, $color-raven, $color-canada);
        background-image: linear-gradient(to bottom right, var(--color-raven), var(--color-canada));
        background-clip: text;
        text-fill-color: transparent;
        box-decoration-break: clone;
        text-shadow: none;
    }
}

// Title Anchors inside Headings
.title-anchor {
    display: inline-block;

    &,
    &:link {
        @include v(text-decoration-color, transparent);
    }

    &:hover,
    &:focus,
    &:active {
        @include v(color, kaiser);
    }
}

// Fragment Anchors inside Headings
.fragment-anchor {
    @include case(lowercase);
    @include font-family(monospace);
    @include v(color, dove);
    display: none;
    visibility: hidden;
    @include v(padding-left, small);
    @include v(padding-right, small);
    position: absolute;
    top: $border-width-thin;
    right: -($measure-small);
    @include v(font-size, small);
    @include v(font-weight, bold);
    @include v(line-height, default);
    text-shadow: none;

    %heading-elements:hover &,
    %heading-elements:focus &,
    %heading-elements:active &,
    &:target {
        display: inline-block;
        visibility: visible;
    }
}

// Related Anchors
.related-anchor::after {
    // NO-BREAK SPACE, RIGHTWARDS ARROW
    content: " â†’";
}

// Anchor Target Animation
%heading-elements,
sup,
li {
    &[id] {
        &:target {
            animation: anchor-target $animation-duration $animation-function;
            animation: anchor-target var(--animation-duration) var(--animation-function);
            @at-root {
                @keyframes anchor-target {
                    0%,
                    50% {
                        @include v(background-color, highlight);
                    }
                    100% {
                        @include v(background-color, transparent);
                    }
                }
            }
        }
    }
}
